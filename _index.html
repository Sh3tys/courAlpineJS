<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <script src="https://unpkg.com/alpinejs" defer></script>
  </head>
  <body>
    <div>
      <!--<h1>Hello world!</h1>-->
      <h1 x-data="{ message: 'Hello World!'}" x-text="message"></h1>
    </div>

    <div x-data="{ count: 0 }">
      <button x-data @click="alert('Ceci est une alerte')">Click me</button>
      <button @click="count++">Increment</button>
      <button @click="count--">Decrement</button>
      <button @click="count=0">Reset</button>

      <span x-text="count"></span>
      <span x-show="count == 5">compteur à 5</span>
    </div>

    <div x-data="{ open: false }">
      <button @click="open = !open">Toggle</button>

      <div x-show="open" x-transition.opacity.duration.1000ms>
        <p>Contenu caché</p>
      </div>
    </div>

    <div x-data="{fruits: ['Apple', 'Banana', 'Orange']}">
      <template x-for="fruit in fruits" :key="fruit">
        <div>
          <span x-text="fruit"></span>
        </div>
      </template>
    </div>

    <div
      x-data="{ 
        search: '',
        fruits: ['foo', 'bar', 'baz', 'qux', 'quux', 'corge', 'grault', 'garply', 'waldo', 'fred', 'plugh', 'xyzzy', 'thud'],
        get filteredItems() {
            return this.fruits.filter(fruit => fruit.includes(this.search));
        } 
    }"
    >
      <!-- get filteredItems fruit.startsWith ou fruit.includes -->
      <input type="text" x-model="search" placeholder="Search fruits..." />

      <template x-for="fruit in filteredItems" :key="fruit">
        <div>
          <span x-text="fruit"></span>
        </div>
      </template>
    </div>
    <div>-----------------------------------------------------------</div>

    <div
      x-data="{
    fruits: ['Apple', 'Banana', 'Orange'],
    choice(i) {
      switch (i) {
        case '0':
          this.fruits.pop();
          break;
        case '1':
          this.fruits = [];
          break;
        case '2':
          this.fruits = ['Apple', 'Banana', 'Orange'];
          break;
      }
    }
  }"
    >
      <template x-for="fruit in fruits" :key="fruit">
        <div>
          <span x-text="fruit"></span>
        </div>
      </template>

      <button @click="choice('0')">Supprimer le dernier</button>
      <button @click="choice('1')">Vider</button>
      <button @click="choice('2')">Reset</button>
    </div>

    <div>
      <div x-data="dropdown">
        <button @click="toggle">Inverser</button>
        <div x-show="open">Contents...</div>
      </div>

      <div x-data="dropdown">
        <button @click="toggle">Inverser</button>
        <div x-show="open">Contents...</div>
      </div>
    </div>

    <div x-data>
      <template x-for="ong in $store.tabs.onglets" :key="ong">
        <button @click="$store.tabs.current = ong" x-text="ong"></button>
      </template>

      <p x-text="$store.tabs.current"></p>
    </div>

    <div x-data>
      <template x-for="ong in $store.tabs.onglets" :key="ong">
        <button @click="$store.tabs.current = ong" x-text="ong"></button>
      </template>

      <div x-show="$store.tabs.current == 'Home'">
        Lorem
        <img src="https://placehold.co/150x150" alt="" />
      </div>
      <div x-show="$store.tabs.current == 'Profile'">
        Ipsum
        <img src="https://placehold.co/150x150" alt="" />
      </div>
      <div x-show="$store.tabs.current == 'Account'">
        Dolor
        <img src="https://placehold.co/150x150" alt="" />
      </div>
    </div>

    <div x-data="{ visible: false }" style="margin-top: 20px">
      <button @click="visible = !visible">
        <span x-text="visible ? 'Cacher' : 'Afficher'"></span> contenu
      </button>

      <div
        x-show="visible"
        x-transition:enter="transition ease-out duration-500"
        x-transition:enter-start="opacity-0 transform scale-90"
        x-transition:enter-end="opacity-100 transform scale-100"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100 transform scale-100"
        x-transition:leave-end="opacity-0 transform scale-90"
        style="background: #eef; padding: 10px; margin-top: 10px"
      >
        <p>Voici un contenu qui apparaît et disparaît avec transition !</p>
      </div>
    </div>

    <div x-data="{ color: 'red', size: 20 }" style="margin-top: 20px">
      <input type="color" x-model="color" />
      <input type="range" min="10" max="50" x-model="size" />

      <p
        x-bind:style="`color: ${color}; font-size: ${size}px; font-weight: bold;`"
      >
        Ce texte change de couleur et de taille dynamiquement !
      </p>

      <button
        x-bind:title="`Couleur actuelle : ${color}`"
        style="margin-top: 10px"
      >
        Survolez-moi pour voir la couleur
      </button>
    </div>

    <div x-data="{ input:'', input2:'', input3:'' }" style="margin-top: 30px">
      <h3>Écouter les events clavier :</h3>
      <input
        type="text"
        x-model="input"
        @keyup.enter="alert('Entrée pressée')"
        placeholder="Entrée"
      />
      <input
        type="text"
        x-model="input2"
        @keyup.shift.enter="alert('Shift+Entrée')"
        placeholder="Shift+Entrée"
      />
      <input
        type="password"
        x-model="input3"
        @keyup="console.log($event.key)"
        placeholder="Mot de passe"
      />

      <h3>Écouter les events souris :</h3>
      

  <div
    x-data="{ isActive: false }"
    @mouseenter="isActive = true; console.log('mouse enter')"
    @mouseover="console.log('mouse over')"
    @mouseleave="isActive = false; console.log('mouse leave')"
    :style="{
      width: '200px',
      height: '80px',
      'background-color': isActive ? 'black' : '#eee',
      color: isActive ? 'white' : 'black',
      'text-align': 'center',
      'line-height': '80px',
      'border-radius': '10px',
      'cursor': 'pointer'
    }"
    class="transition"
  >
    Passez la souris ici
  </div>



      <h3>Formulaire :</h3>
      <form @submit.prevent="alert('submit prevent')" style="margin-top: 10px">
        <input type="text" placeholder="Nom" />
        <button type="submit">Envoyer</button>
      </form>
      <form @submit.stop="alert('submit stop')" style="margin-top: 10px">
        <input type="text" placeholder="Nom" />
        <button type="submit">Envoyer</button>
      </form>

      <h3>Utilisation de $event :</h3>
      <button @click="$event.target.remove()">
        Clique pour supprimer le bouton
      </button>

      <h3>Custom events :</h3>
      <div
        x-data
        @foo.window="alert('Event foo reçu !')"
        style="margin-top: 10px; padding: 5px; border: 1px solid #ccc"
      >
        Parent écoutant l'event
      </div>
      <div x-data style="margin-top: 10px">
        <button @click="$dispatch('foo')">Envoyer un custom event</button>
      </div>
    </div>

    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.data("dropdown", () => ({
          open: false,
          toggle() {
            console.log("toggle");
            this.open = !this.open;
          },
        }));

        Alpine.store("tabs", {
          onglets: ["Home", "Profile", "Account"],
          current: "Home",
        });
      });
    </script>
  </body>
</html>
